<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Videos</title>
    {% load static %}

    <!-- Bootstrap & Icons -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <!-- JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <style>
        body {
            background: linear-gradient(to right, #e3f2fd, #ffffff);
        }

        .video-card {
            background-color: #ffffff;
            border-radius: 18px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            padding: 25px;
            margin-bottom: 40px;
        }

        .video-title {
            font-size: 1.6rem;
            font-weight: 600;
            margin-top: 15px;
        }

        .video-description {
            background-color: #f1f3f5;
            padding: 15px;
            border-radius: 12px;
        }

        .share-links a {
            margin-right: 12px;
        }

        /* Dropdown style */
        .dropdown-menu {
            background-color: #343a40;
            border-radius: 12px;
            padding: 10px;
            min-width: 130px;
            box-shadow: 0px -2px 10px rgba(0, 0, 0, 0.4);
        }

        .dropdown-menu .dropdown-item {
            color: #fff;
            padding: 8px 14px;
            border-radius: 8px;
            transition: background-color 0.2s ease;
        }

        .dropdown-menu .dropdown-item:hover {
            background-color: #495057;
        }

        /* Alert Message */
        #msg-container {
            transition: opacity 0.5s ease-in-out;
            max-width: 600px;
            margin: 0 auto 30px;
            animation: fadeIn 0.6s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to   { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-light">

<div class="container mt-4 mb-5">
    <h2 class="text-center mb-4">ðŸŽ¬ Your Videos</h2>

    <!-- âœ… Flash Messages -->
    {% if messages %}
    <div id="msg-container">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible shadow-sm rounded-pill px-4 py-2 text-center" role="alert">
            <strong>{{ message }}</strong>
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- âœ… Video Loop -->
    {% for videos in video %}
    <div class="video-card">
        <div class="embed-responsive embed-responsive-16by9">
            <video class="embed-responsive-item" controls>
                <source src="{{ videos.videofile.url }}">
            </video>
        </div>

        <h4 class="video-title">{{ videos.title }}</h4>

        <div class="video-description mt-2">
            <p>{{ videos.description }}</p>
        </div>

        <div class="mt-3">
            <a href="{{ videos.videofile.url }}" download class="btn btn-primary">
                <i class="bi bi-download"></i> Download
            </a>
            <a href="/delete/{{ videos.id }}" class="btn btn-danger" onclick="return confirm('Do you want to delete?')">
                <i class="bi bi-trash"></i> Delete
            </a>
        </div>

        <div class="share-links mt-3">
            <p><strong>ðŸ“¤ Share this video:</strong></p>
            <a class="btn btn-success btn-sm" href="https://wa.me/?text={{ request.build_absolute_uri }}" target="_blank">
                <i class="bi bi-whatsapp"></i> WhatsApp
            </a>
            <a class="btn btn-info btn-sm" href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}" target="_blank">
                <i class="bi bi-twitter"></i> Twitter
            </a>
        </div>
    </div>
    {% endfor %}
</div>

<!-- âœ… Fixed Bottom Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-bottom">
    <div class="container justify-content-around">
        <a class="nav-link text-white" href="/"><i class="bi bi-house-door-fill"></i> Home</a>
        <a class="nav-link text-white" href="/shorts/"><i class="bi bi-lightning-fill"></i> Shorts</a>
        <a class="nav-link text-white" href="/video_list/"><i class="bi bi-collection-play-fill"></i> Videos</a>
        <a class="nav-link text-white" href="/upload/"><i class="bi bi-cloud-upload-fill"></i> Upload</a>
        <div class="btn-group dropup">
            <button type="button" class="btn text-white dropdown-toggle" data-toggle="dropdown">
                <i class="bi bi-gear-fill"></i> Settings
            </button>
            <div class="dropdown-menu">
                <a class="dropdown-item" href="/help/"><i class="bi bi-question-circle-fill"></i> Help</a>
                <a class="dropdown-item" href="/about/"><i class="bi bi-info-circle"></i> About</a>
                <a class="dropdown-item" href="/contact/"><i class="bi bi-envelope"></i> Contact</a>
                <a class="dropdown-item" href="/feedback/"><i class="bi bi-chat-dots"></i> Feedback</a>
                <a class="dropdown-item" href="/exit/" onclick="exit()"><i class="bi bi-box-arrow-right"></i> Exit</a>
            </div>
        </div>
    </div>
</nav>

<!-- âœ… Auto Dismiss Flash Msg -->
<script>
  setTimeout(function () {
    const alertBox = document.getElementById("msg-container");
    if (alertBox) {
      alertBox.style.opacity = "0";
      setTimeout(() => alertBox.remove(), 500);
    }
  }, 5000);
</script>

</body>
</html>
